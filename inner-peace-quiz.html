<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Inner Peace & Stress Reset — Emotional Intelligence Developer</title>
<style>
  :root{--bg:#ffffff;--card:#fff;--accent:#0b63d6;--muted:#6b7280;--cta:#f59e0b}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; background:#f3f4f6; color:#111}
  .wrap{max-width:760px;margin:28px auto;padding:22px}
  .card{background:var(--card);border-radius:12px;padding:22px;box-shadow:0 10px 30px rgba(16,24,40,0.06)}
  h1{margin:0 0 6px;font-size:20px}
  p.lead{margin:0 0 18px;color:var(--muted)}
  .q{margin:14px 0;padding:12px;border-radius:8px;background:#fff;border:1px solid #eee;display:flex;flex-direction:column;gap:8px}
  .q h3{margin:0;font-size:15px}
  .opts{display:flex;gap:8px;flex-wrap:wrap}
  .opt{flex:1;min-width:150px;padding:10px;border-radius:8px;border:1px solid #e8e8e8;background:#fff;cursor:pointer;text-align:left;transition:all .12s}
  .opt input{display:none}
  .opt:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(17,24,39,0.04)}
  .opt.selected{border-color:var(--accent);box-shadow:0 10px 24px rgba(11,99,214,0.08);background:linear-gradient(180deg,var(--accent),#195ed6);color:#fff}
  .controls{display:flex;gap:12px;align-items:center;margin-top:18px}
  .btn{padding:10px 14px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer}
  .btn.secondary{background:#e5e7eb;color:#111}
  .meta{margin-left:auto;color:var(--muted);font-size:13px}
  .result{margin-top:18px;padding:16px;border-radius:10px;background:linear-gradient(180deg,#ffffff,#fbfdff);border:1px solid #eee}
  .cta{display:inline-block;margin-top:12px;padding:10px 14px;border-radius:8px;background:var(--cta);color:#111;text-decoration:none;font-weight:700}
  .disclaimer{font-size:12px;color:var(--muted);margin-top:12px}
  footer{font-size:12px;color:var(--muted);margin-top:16px}
  .download{margin-top:12px;display:inline-block;padding:10px 14px;border-radius:8px;background:#10b981;color:#fff;text-decoration:none;font-weight:700}
  @media(max-width:520px){.opts{flex-direction:column}.wrap{padding:12px}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="region" aria-labelledby="quiz-title">
    <h1 id="quiz-title">Inner Peace & Stress Reset Quiz</h1>
    <p class="lead">Answer 5 quick questions to discover which simple reset will help you feel calmer today.</p>

    <div id="quiz">
      <div class="q" data-q="1">
        <h3>Question 1 — When stress shows up, your first reaction is:</h3>
        <div class="opts">
          <label class="opt" data-val="A"><input type="radio" name="q1" value="A"> A) My breath shortens; I feel tense</label>
          <label class="opt" data-val="B"><input type="radio" name="q1" value="B"> B) I get distracted and worry a lot</label>
          <label class="opt" data-val="C"><input type="radio" name="q1" value="C"> C) I push through and feel drained later</label>
        </div>
      </div>

      <div class="q" data-q="2">
        <h3>Question 2 — What helps you calm down most quickly?</h3>
        <div class="opts">
          <label class="opt" data-val="A"><input type="radio" name="q2" value="A"> A) A few deep breaths or stretching</label>
          <label class="opt" data-val="B"><input type="radio" name="q2" value="B"> B) Talking it out or writing it down</label>
          <label class="opt" data-val="C"><input type="radio" name="q2" value="C"> C) A walk, nap, or stepping away</label>
        </div>
      </div>

      <div class="q" data-q="3">
        <h3>Question 3 — Your day is usually:</h3>
        <div class="opts">
          <label class="opt" data-val="A"><input type="radio" name="q3" value="A"> A) Busy and high-energy</label>
          <label class="opt" data-val="B"><input type="radio" name="q3" value="B"> B) Emotionally up-and-down</label>
          <label class="opt" data-val="C"><input type="radio" name="q3" value="C"> C) Overloaded but quiet</label>
        </div>
      </div>

      <div class="q" data-q="4">
        <h3>Question 4 — Which feels most missing for you lately?</h3>
        <div class="opts">
          <label class="opt" data-val="A"><input type="radio" name="q4" value="A"> A) A simple calm practice to use anywhere</label>
          <label class="opt" data-val="B"><input type="radio" name="q4" value="B"> B) Space to understand my feelings</label>
          <label class="opt" data-val="C"><input type="radio" name="q4" value="C"> C) Better daily routines and rest</label>
        </div>
      </div>

      <div class="q" data-q="5">
        <h3>Question 5 — After a stressful day you want:</h3>
        <div class="opts">
          <label class="opt" data-val="A"><input type="radio" name="q5" value="A"> A) One quick practice to reset right away</label>
          <label class="opt" data-val="B"><input type="radio" name="q5" value="B"> B) A clear method to process emotions</label>
          <label class="opt" data-val="C"><input type="radio" name="q5" value="C"> C) A plan to change my daily habits</label>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="calcBtn" type="button">See My Reset</button>
        <button class="btn secondary" id="resetBtn" type="button">Reset</button>
        <div class="meta">Takes 1 minute</div>
      </div>

      <div id="resultArea" class="result" aria-live="polite" style="display:none"></div>

      <div style="margin-top:12px">
        <p style="font-size:13px;color:#888;margin:0 0 6px 0;">Ads.</p>
        <a id="affiliateBtn" class="cta"
           data-base="https://amzn.to/3KoYF66"
           href="https://amzn.to/4q80e7C"
           target="_blank" rel="noopener noreferrer">
           Get Guided Support
        </a>
      </div>

      <div class="disclaimer">This tool offers general wellbeing suggestions and is not a substitute for professional care.</div>

      <div style="margin-top:12px">
        <a id="downloadPdfBtn" class="download" href="#" role="button">Download My Reset (PDF)</a>
      </div>

      <footer>Created by Emotional Intelligence Developer — https://emotionalintelligencedeveloper.com/</footer>
    </div>
  </div>
</div>

<!-- jsPDF CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  // selection visuals
  document.querySelectorAll('.opts').forEach(function(opts){
    opts.addEventListener('click', function(ev){
      var label = ev.target.closest('label.opt');
      if(!label) return;
      label.parentElement.querySelectorAll('label.opt').forEach(function(lb){ lb.classList.remove('selected') });
      label.classList.add('selected');
      var radio = label.querySelector('input[type="radio"]');
      if(radio){ radio.checked = true; }
    });
  });

  // scoring helpers
  function calcResult(){
    var counts = {A:0,B:0,C:0};
    for(var i=1;i<=5;i++){
      var val = document.querySelector('input[name="q'+i+'"]:checked');
      if(!val){
        alert('Please answer question ' + i);
        return null;
      }
      counts[val.value]++;
    }
    return counts;
  }
  function topValue(counts){
    var order = ['A','B','C'];
    var top = order[0];
    for(var j=1;j<order.length;j++){
      if(counts[order[j]] > counts[top]) top = order[j];
    }
    return top;
  }

  // structured plan text
  function buildPlan(top){
    if(top === 'A'){
      return {
        title: 'Quick Calm',
        short: 'You experience stress as physical tightness — fast body-based resets help most.',
        why: 'Simple breathing and movement send a safety signal to your nervous system so your mind can refocus quickly.',
        steps: [
          '3-breath grounding: inhale 4 — hold 2 — exhale 6. Repeat three rounds.',
          'Stand and do a 60-second stretch (arms up, side-bend, neck rolls).',
          'Save one 1-3 minute guided audio to use when you step away.'
        ],
        immediate: 'Do the 3-breath grounding now — three rounds.'
      };
    } else if(top === 'B'){
      return {
        title: 'Emotional Clarity',
        short: 'Your stress shows as swirling thoughts — naming and structuring them reduces intensity.',
        why: 'Putting words to feelings separates you from them and reveals clear, small next steps.',
        steps: [
          'Write one sentence: “I feel ___ because ___.” Keep it brief and factual.',
          'Set a 5-minute timer and list two possible next steps.',
          'Try a short journaling prompt 3 times this week to practice naming feelings.'
        ],
        immediate: 'Write that one-sentence now and notice how it changes your thinking.'
      };
    } else {
      return {
        title: 'Daily Balance',
        short: 'You push through and feel drained — steady micro-habits restore energy over time.',
        why: 'Tiny consistent routines (short rests, sleep windows) stop stress from stacking up.',
        steps: [
          'Pick one 10-minute habit to do daily for 7 days (walk, journaling, gentle movement).',
          'Set a consistent bedtime window and a 10-minute wind-down ritual.',
          'Schedule a 5-minute mid-day micro-rest — no screens, just breath or movement.'
        ],
        immediate: 'Choose your 10-minute habit and try it today.'
      };
    }
  }

  // show results and update affiliate UTM
  document.getElementById('calcBtn').addEventListener('click', function(){
    var counts = calcResult();
    if(!counts) return;
    var t = topValue(counts);
    var plan = buildPlan(t);
    var html = '';
    html += '<strong>Your Reset: ' + plan.title + '</strong>';
    html += '<p>' + plan.short + '</p>';
    html += '<p><strong>Why this helps:</strong> ' + plan.why + '</p>';
    html += '<ol>';
    plan.steps.forEach(function(s){ html += '<li>' + s + '</li>'; });
    html += '</ol>';
    html += '<p style="margin-top:8px;"><strong>Immediate step:</strong> ' + plan.immediate + '</p>';
    html += '<p style="margin-top:8px;"><em>Reflection:</em> Which reset can you try within the next 10 minutes?</p>';

    var area = document.getElementById('resultArea');
    area.innerHTML = html;
    area.style.display = 'block';

    // set affiliate with UTM
    var base = document.getElementById('affiliateBtn').getAttribute('data-base') || document.getElementById('affiliateBtn').href.split('?')[0];
    var campaign = 'inner_peace_' + (t === 'A' ? 'quickcalm' : t === 'B' ? 'clarity' : 'balance');
    document.getElementById('affiliateBtn').href = base + '?utm_source=site&utm_medium=quiz&utm_campaign=' + campaign;

    // update CTA text per plan
    if(t === 'A') document.getElementById('affiliateBtn').textContent = 'Get Guided Resets';
    else if(t === 'B') document.getElementById('affiliateBtn').textContent = 'Explore Guided Exercises';
    else document.getElementById('affiliateBtn').textContent = 'Discover Rhythm Tools';

    // scroll to affiliate so users see CTA
    var aff = document.getElementById('affiliateBtn');
    if(aff) aff.scrollIntoView({behavior:'smooth', block:'center'});
  });

  // reset logic
  document.getElementById('resetBtn').addEventListener('click', function(){
    document.querySelectorAll('input[type="radio"]').forEach(function(r){ r.checked = false; });
    document.querySelectorAll('label.opt').forEach(function(lb){ lb.classList.remove('selected'); });
    var area = document.getElementById('resultArea');
    area.style.display = 'none';
    area.innerHTML = '';
    // reset affiliate to base (no utm)
    var aff = document.getElementById('affiliateBtn');
    if(aff && aff.getAttribute('data-base')) aff.href = aff.getAttribute('data-base');
  });

  // PDF generation — one page, spaced, no emoji
  document.getElementById('downloadPdfBtn').addEventListener('click', function(e){
    e.preventDefault();
    try {
      const { jsPDF } = window.jspdf;
      var counts = calcResult();
      if(!counts) return;
      var t = topValue(counts);
      var plan = buildPlan(t);

      // collect answers
      var answers = [];
      for(var i=1;i<=5;i++){
        var sel = document.querySelector('input[name="q'+i+'"]:checked');
        var qtext = document.querySelector('.q[data-q="'+i+'"] h3').innerText;
        var aval = sel ? sel.parentElement.innerText.trim() : 'No answer';
        answers.push({q:qtext,a:aval});
      }

      var doc = new jsPDF({unit:'pt', format:'a4'});
      var left = 40;
      var maxWidth = 515;
      var y = 60;

      doc.setFontSize(12);
      doc.text('https://emotionalintelligencedeveloper.com/', left, 30);

      doc.setFontSize(18);
      doc.text('Inner Peace — Your Reset Plan', left, y); y += 28;

      doc.setFontSize(12);
      doc.text('Generated: ' + new Date().toLocaleString(), left, y); y += 20;

      doc.setFontSize(14);
      doc.text(plan.title + ' Reset', left, y); y += 18;

      doc.setFontSize(11);
      var shortS = doc.splitTextToSize(plan.short, maxWidth);
      doc.text(shortS, left, y); y += shortS.length*14 + 6;

      doc.setFontSize(12);
      doc.text('Why this helps:', left, y); y += 16;
      var whyS = doc.splitTextToSize(plan.why, maxWidth); doc.text(whyS, left, y); y += whyS.length*14 + 8;

      doc.setFontSize(12);
      doc.text('Recommended Steps:', left, y); y += 16;
      doc.setFontSize(11);
      plan.steps.forEach(function(s, idx){
        var lines = doc.splitTextToSize((idx+1)+'. '+s, maxWidth);
        doc.text(lines, left, y); y += lines.length*14 + 6;
      });

      y += 6;
      doc.setFontSize(12);
      doc.text('Your Answers:', left, y); y += 16;
      doc.setFontSize(11);
      answers.forEach(function(it){
        var qLines = doc.splitTextToSize(it.q, maxWidth);
        doc.text(qLines, left, y); y += qLines.length*12;
        var aLines = doc.splitTextToSize('Answer: '+it.a, maxWidth);
        doc.text(aLines, left+8, y); y += aLines.length*12 + 8;
      });

      // footer
      doc.setFontSize(10);
      doc.text('Created by Emotional Intelligence Developer — https://emotionalintelligencedeveloper.com/', left, 800);

      var filename = 'Inner-Peace-Reset-' + (new Date()).toISOString().slice(0,19).replace(/[:T]/g,'-') + '.pdf';
      doc.save(filename);
    } catch(err){
      alert('PDF generation failed. Please try again.');
      console.error(err);
    }
  });

  // ensure affiliate data-base attribute exists
  document.querySelectorAll('#affiliateBtn').forEach ? null : null;
  (function setBase(){
    var a = document.getElementById('affiliateBtn');
    if(a){
      var base = a.getAttribute('data-base') || a.href.split('?')[0];
      a.setAttribute('data-base', base);
    }
  })();
</script>
</body>
</html>
